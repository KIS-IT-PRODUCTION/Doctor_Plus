"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["916"],{4961:function(e,t,i){i.r(t),i.d(t,{OrganizationBillingPage:()=>y});var n=i(9109),a=i(4455),l=i(2672),o=i(2654),r=i(708),s=i(8969),c=i(111),d=i(9541),h=i(3746),g=i(6054),p=i(5515),u=i(1800);let b={0:"plans",1:"statements",2:"payment-methods"},m=(0,l.withCardStateProvider)(()=>{let e=(0,l.useCardState)(),{selectedTab:t,handleTabChange:i}=(0,h.x)(b);return(0,n.tZ)(d.Col,{elementDescriptor:d.descriptors.page,sx:e=>({gap:e.space.$8,color:e.colors.$colorText}),children:(0,n.BX)(d.Col,{elementDescriptor:d.descriptors.profilePage,elementId:d.descriptors.profilePage.setId("billing"),gap:4,children:[(0,n.tZ)(o.h.Root,{children:(0,n.tZ)(o.h.Title,{localizationKey:(0,d.localizationKeys)("organizationProfile.billingPage.title"),textVariant:"h2"})}),(0,n.tZ)(a.Z.Alert,{children:e.error}),(0,n.BX)(r.mQ,{value:t,onChange:i,children:[(0,n.BX)(r.dr,{sx:e=>({gap:e.space.$6}),children:[(0,n.tZ)(r.OK,{localizationKey:(0,d.localizationKeys)("organizationProfile.billingPage.start.headerTitle__subscriptions")}),(0,n.tZ)(r.OK,{localizationKey:(0,d.localizationKeys)("organizationProfile.billingPage.start.headerTitle__statements")})]}),(0,n.BX)(r.nP,{children:[(0,n.BX)(r.x4,{sx:{width:"100%",flexDirection:"column"},children:[(0,n.tZ)(u.b,{title:(0,d.localizationKeys)("organizationProfile.billingPage.subscriptionsListSection.title"),arrowButtonText:(0,d.localizationKeys)("organizationProfile.billingPage.subscriptionsListSection.actionLabel__switchPlan"),arrowButtonEmptyText:(0,d.localizationKeys)("organizationProfile.billingPage.subscriptionsListSection.actionLabel__newSubscription")}),(0,n.tZ)(s.Cv,{condition:e=>e({permission:"org:sys_billing:manage"}),children:(0,n.tZ)(g.Hw,{})})]}),(0,n.tZ)(r.x4,{sx:{width:"100%"},children:(0,n.tZ)(p.f,{})})]})]})]})})}),y=()=>(0,n.tZ)(c.SubscriberTypeContext.Provider,{value:"org",children:(0,n.tZ)(m,{})})},1800:function(e,t,i){i.d(t,{b:()=>d});var n=i(9109),a=i(9655),l=i(8969),o=i(111),r=i(9541),s=i(6958),c=i(4676);function d({title:e,arrowButtonText:t,arrowButtonEmptyText:i}){let{handleSelectPlan:d,captionForSubscription:h,canManageSubscription:g}=(0,o.usePlansContext)(),p=(0,o.useSubscriberTypeContext)(),{data:u}=(0,o.useSubscriptions)(),b=(0,l.N2)(e=>e({permission:"org:sys_billing:manage"})||"user"===p),{navigate:m}=(0,c.useRouter)(),y=(e,t)=>{d({mode:"modal",plan:e.plan,planPeriod:e.planPeriod,event:t})},z=u.sort((e,t)=>"active"===e.status&&"active"!==t.status?-1:("active"===t.status&&e.status,1));return(0,n.BX)(a.zd.Root,{id:"subscriptionsList",title:e,centered:!1,sx:e=>({borderTop:"none",paddingTop:e.space.$1}),children:[u.length>0&&(0,n.BX)(r.Table,{tableHeadVisuallyHidden:!0,children:[(0,n.tZ)(r.Thead,{children:(0,n.BX)(r.Tr,{children:[(0,n.tZ)(r.Th,{children:"Plan"}),(0,n.tZ)(r.Th,{children:"Start date"}),(0,n.tZ)(r.Th,{children:"Edit"})]})}),(0,n.tZ)(r.Tbody,{children:z.map(e=>(0,n.BX)(r.Tr,{children:[(0,n.tZ)(r.Td,{children:(0,n.BX)(r.Col,{gap:1,children:[(0,n.BX)(r.Flex,{align:"center",gap:1,children:[(0,n.tZ)(r.Icon,{icon:s.ou,sx:e=>({width:e.sizes.$4,height:e.sizes.$4,opacity:e.opacity.$inactive})}),(0,n.tZ)(r.Text,{variant:"subtitle",sx:e=>({marginRight:e.sizes.$1}),children:e.plan.name}),z.length>1||e.canceledAt?(0,n.tZ)(r.Badge,{colorScheme:"active"===e.status?"secondary":"primary",localizationKey:"active"===e.status?(0,r.localizationKeys)("badge__activePlan"):(0,r.localizationKeys)("badge__upcomingPlan")}):null]}),(!e.plan.isDefault||"upcoming"===e.status)&&(0,n.tZ)(r.Text,{variant:"caption",colorScheme:"secondary",localizationKey:h(e)})]})}),(0,n.tZ)(r.Td,{sx:e=>({textAlign:"right"}),children:(0,n.BX)(r.Text,{variant:"subtitle",children:[e.plan.currencySymbol,"annual"===e.planPeriod?e.plan.annualAmountFormatted:e.plan.amountFormatted,(e.plan.amount>0||e.plan.annualAmount>0)&&(0,n.tZ)(r.Span,{sx:e=>({color:e.colors.$colorTextSecondary,textTransform:"lowercase",":before":{content:'"/"',marginInline:e.space.$1}}),localizationKey:"annual"===e.planPeriod?(0,r.localizationKeys)("commerce.year"):(0,r.localizationKeys)("commerce.month")})]})}),(0,n.tZ)(r.Td,{sx:e=>({textAlign:"right"}),children:g({subscription:e})&&e.id&&!e.plan.isDefault&&(0,n.tZ)(r.Button,{"aria-label":"Manage subscription",onClick:t=>y(e,t),variant:"bordered",colorScheme:"secondary",isDisabled:!b,sx:e=>({width:e.sizes.$6,height:e.sizes.$6}),children:(0,n.tZ)(r.Icon,{icon:s.tc,sx:e=>({width:e.sizes.$4,height:e.sizes.$4,opacity:e.opacity.$inactive})})})})]},e.id))})]}),(0,n.tZ)(a.zd.ArrowButton,{id:"subscriptionsList",textLocalizationKey:u.length>0?t:i,sx:[e=>({justifyContent:"start",height:e.sizes.$8})],leftIcon:u.length>0?s.Ic:s.v3,leftIconSx:e=>({width:e.sizes.$4,height:e.sizes.$4}),onClick:()=>void m("plans")})]})}}}]);