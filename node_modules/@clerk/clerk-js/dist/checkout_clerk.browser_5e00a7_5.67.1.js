"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["237"],{5454:function(e,t,o){o.r(t),o.d(t,{Checkout:()=>D});var i=o(1925),r=o(3812),a=o(3064),n=o(7718),l=o(2464),s=o(9140),c=o(3003),d=o(4676),m=o(1201),u=o(43);let p=e=>e[0].toUpperCase()+e.slice(1),h=({checkout:e,isMotionSafe:t})=>{let o=(0,d.useRouter)(),{setIsOpen:l}=(0,n.useDrawerContext)(),{newSubscriptionRedirectUrl:s}=(0,r.useCheckoutContext)();return(0,i.BX)(i.HY,{children:[(0,i.tZ)(n.Drawer.Body,{children:(0,i.BX)(a.Span,{elementDescriptor:a.descriptors.checkoutSuccessRoot,sx:e=>({margin:"auto",position:"relative",aspectRatio:"1/1",display:"grid",width:"100%",padding:e.space.$4,flexShrink:0,transformOrigin:"bottom center",animationName:"scaleIn",animationDuration:`${c.bf.slowest}ms`,animationTimingFunction:c.$$.bezier,animationFillMode:"forwards",opacity:0,"@keyframes scaleIn":{"0%":{filter:"blur(10px)",transform:"scale(0.85)",opacity:0},"100%":{filter:"blur(0px)",transform:"scale(1)",opacity:1}},...!t&&{animation:"none",opacity:1}}),children:[[1,.75,.5].map((e,o,r)=>(0,i.tZ)(y,{scale:e,index:r.length-1-o,isMotionSafe:t},e)),(0,i.BX)(a.Box,{elementDescriptor:a.descriptors.checkoutSuccessBadge,sx:e=>({margin:"auto",gridArea:"1/1",display:"flex",position:"relative",width:e.sizes.$16,height:e.sizes.$16,borderRadius:e.radii.$circle,backgroundImage:"linear-gradient(180deg, rgba(255, 255, 255, 0.30) 0%, rgba(0, 0, 0, 0.12) 50%, rgba(0, 0, 0, 0.30) 95.31%)",boxShadow:"0px 4px 12px 0px rgba(0, 0, 0, 0.35), 0px 1px 0px 0px rgba(255, 255, 255, 0.05) inset",":before":{content:'""',position:"absolute",inset:e.space.$1,borderRadius:e.radii.$circle,backgroundColor:e.colors.$colorBackground}}),children:[(0,i.tZ)("svg",{fill:"none",viewBox:"0 0 10 10","aria-hidden":"true",style:{position:"relative",margin:"auto",width:"1rem",height:"1rem"},children:(0,i.tZ)("path",{d:"m1 6 3 3 5-8",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"1",pathLength:"1",style:{strokeDashoffset:"1",animationName:"check",animationDuration:`${c.bf.drawer}ms`,animationTimingFunction:c.$$.bezier,animationFillMode:"forwards",animationDelay:`${c.bf.slow}ms`,...!t&&{strokeDashoffset:"0",animation:"none"}}})}),(0,i.tZ)("style",{children:`
              @keyframes check {
                0% {
                  stroke-dashoffset: 1;
                }
                100% {
                  stroke-dashoffset: 0;
                }
            `})]}),(0,i.BX)(a.Span,{sx:e=>({margin:"auto",gridArea:"1/1",position:"relative",textAlign:"center",transform:`translateY(${e.space.$20})`}),children:[(0,i.tZ)(a.Heading,{elementDescriptor:a.descriptors.checkoutSuccessTitle,as:"h2",textVariant:"h2",localizationKey:e.totals.totalDueNow.amount>0?(0,a.localizationKeys)("commerce.checkout.title__paymentSuccessful"):(0,a.localizationKeys)("commerce.checkout.title__subscriptionSuccessful"),sx:{opacity:0,animationName:"slideUp",animationDuration:`${c.bf.slowest}ms`,animationTimingFunction:c.$$.bezier,animationFillMode:"forwards","@keyframes slideUp":{"0%":{transform:"translateY(30px)",opacity:0},"100%":{transform:"translateY(0)",opacity:1}},...!t&&{opacity:1,animation:"none"}}}),(0,i.tZ)(a.Text,{elementDescriptor:a.descriptors.checkoutSuccessDescription,colorScheme:"secondary",sx:e=>({textAlign:"center",paddingInline:e.space.$8,marginBlockStart:e.space.$2,opacity:0,animationName:"slideUp",animationDuration:`${1.5*c.bf.slowest}ms`,animationTimingFunction:c.$$.bezier,animationFillMode:"forwards","@keyframes slideUp":{"0%":{transform:"translateY(30px)",opacity:0},"100%":{transform:"translateY(0)",opacity:1}},...!t&&{opacity:1,animation:"none"}}),localizationKey:e.totals.totalDueNow.amount>0?(0,a.localizationKeys)("commerce.checkout.description__paymentSuccessful"):(0,a.localizationKeys)("commerce.checkout.description__subscriptionSuccessful")})]})]})}),(0,i.BX)(n.Drawer.Footer,{sx:e=>({rowGap:e.space.$4,animationName:"footerSlideInUp",animationDuration:`${c.bf.drawer}ms`,animationTimingFunction:c.$$.bezier,"@keyframes footerSlideInUp":{"0%":{transform:"translateY(100%)",opacity:0},"100%":{transform:"translateY(0)",opacity:1}},...!t&&{animation:"none"}}),children:[(0,i.BX)(n.LineItems.Root,{children:[(0,i.BX)(n.LineItems.Group,{variant:"secondary",children:[(0,i.tZ)(n.LineItems.Title,{title:(0,a.localizationKeys)("commerce.checkout.lineItems.title__totalPaid")}),(0,i.tZ)(n.LineItems.Description,{text:`${e.totals.totalDueNow.currencySymbol}${e.totals.totalDueNow.amountFormatted}`})]}),(0,i.BX)(n.LineItems.Group,{variant:"secondary",children:[(0,i.tZ)(n.LineItems.Title,{title:e.totals.totalDueNow.amount>0?(0,a.localizationKeys)("commerce.checkout.lineItems.title__paymentMethod"):(0,a.localizationKeys)("commerce.checkout.lineItems.title__subscriptionBegins")}),(0,i.tZ)(n.LineItems.Description,{text:e.totals.totalDueNow.amount>0?e.paymentSource?"card"!==e.paymentSource.paymentMethod?`${p(e.paymentSource.paymentMethod)}`:`${p(e.paymentSource.cardType)} ⋯ ${e.paymentSource.last4}`:"–":e.planPeriodStart?(0,u.p6)(new Date(e.planPeriodStart)):"–"})]})]}),(0,i.tZ)(a.Button,{onClick:()=>{s&&o.navigate(s),l&&l(!1)},localizationKey:(0,a.localizationKeys)("formButtonPrimary")})]})]})};function y({scale:e,index:t,isMotionSafe:o}){return(0,i.tZ)(a.Span,{elementDescriptor:a.descriptors.checkoutSuccessRing,sx:i=>({margin:"auto",gridArea:"1/1",width:`${100*e}%`,height:`${100*e}%`,borderWidth:1,borderStyle:"solid",borderColor:i.colors.$neutralAlpha200,borderRadius:i.radii.$circle,maskImage:"linear-gradient(to bottom, transparent 15%, black, transparent 85%)",opacity:0,animationName:m.animations.fadeIn,animationDuration:`${c.bf.slow}ms`,animationTimingFunction:c.$$.bezier,animationFillMode:"forwards",animationDelay:`${t*c.bf.slow}ms`,...!o&&{animation:"none",opacity:1}})})}var f=o(3799),g=o(9144),b=o(3610),S=o(6771);let k=e=>e[0].toUpperCase()+e.slice(1),x=({checkout:e,onCheckoutComplete:t})=>{let{plan:o,planPeriod:r,totals:l,isImmediatePlanChange:s}=e,c=!!l.credit?.amount&&l.credit.amount>0;return(0,i.BX)(n.Drawer.Body,{children:[(0,i.tZ)(a.Box,{elementDescriptor:a.descriptors.checkoutFormLineItemsRoot,sx:e=>({padding:e.space.$4,borderBottomWidth:e.borderWidths.$normal,borderBottomStyle:e.borderStyles.$solid,borderBottomColor:e.colors.$neutralAlpha100}),children:(0,i.BX)(n.LineItems.Root,{children:[(0,i.BX)(n.LineItems.Group,{children:[(0,i.tZ)(n.LineItems.Title,{title:o.name,description:"annual"===r?(0,a.localizationKeys)("commerce.billedAnnually"):void 0}),(0,i.tZ)(n.LineItems.Description,{prefix:"annual"===r?"x12":void 0,text:`${o.currencySymbol}${"month"===r?o.amountFormatted:o.annualMonthlyAmountFormatted}`,suffix:(0,a.localizationKeys)("commerce.checkout.perMonth")})]}),(0,i.BX)(n.LineItems.Group,{borderTop:!0,variant:"tertiary",children:[(0,i.tZ)(n.LineItems.Title,{title:(0,a.localizationKeys)("commerce.subtotal")}),(0,i.tZ)(n.LineItems.Description,{text:`${l.subtotal.currencySymbol}${l.subtotal.amountFormatted}`})]}),c&&(0,i.BX)(n.LineItems.Group,{variant:"tertiary",children:[(0,i.tZ)(n.LineItems.Title,{title:(0,a.localizationKeys)("commerce.creditRemainder")}),(0,i.tZ)(n.LineItems.Description,{text:`- ${l.credit?.currencySymbol}${l.credit?.amountFormatted}`})]}),(0,i.BX)(n.LineItems.Group,{borderTop:!0,children:[(0,i.tZ)(n.LineItems.Title,{title:(0,a.localizationKeys)("commerce.totalDueToday")}),(0,i.tZ)(n.LineItems.Description,{text:`${l.totalDueNow.currencySymbol}${l.totalDueNow.amountFormatted}`})]})]})}),!s&&(0,i.tZ)(a.Box,{elementDescriptor:a.descriptors.checkoutFormLineItemsRoot,sx:e=>({paddingBlockStart:e.space.$4,paddingInline:e.space.$4}),children:(0,i.tZ)(a.Text,{localizationKey:(0,a.localizationKeys)("commerce.checkout.downgradeNotice"),variant:"caption",colorScheme:"secondary"})}),(0,i.tZ)(B,{checkout:e,onCheckoutComplete:t})]})},B=({checkout:e,onCheckoutComplete:t})=>{let{organization:o}=(0,f.o8)(),{subscriber:s,subscriberType:c}=(0,r.useCheckoutContext)(),[d,m]=(0,g.useState)(!1),[p,h]=(0,g.useState)(),{data:y,revalidate:b}=(0,l.ib)(s().getPaymentSources,{},void 0,`commerce-payment-sources-${s().id}`),{data:k}=y||{data:[]},[x,B]=(0,g.useState)(()=>k.length>0?"existing":"new"),w=async i=>{try{let r=await e.confirm({...i,..."org"===c?{orgId:o?.id}:{}});t(r),b()}catch(e){(0,u.S3)(e,[],h)}},Z=async e=>{e.preventDefault(),m(!0),h(void 0);let t=new FormData(e.currentTarget).get("payment_source_id");await w({paymentSourceId:t,..."org"===c?{orgId:o?.id}:{}}),m(!1)},v=async e=>{await w({gateway:"stripe",paymentToken:e.stripeSetupIntent?.payment_method,..."org"===c?{orgId:o?.id}:{}}),m(!1)},C=async()=>{try{let i=await e.confirm({gateway:"stripe",useTestCard:!0,..."org"===c?{orgId:o?.id}:{}});b(),t(i)}catch(e){(0,u.S3)(e,[],h)}};return(0,i.BX)(a.Col,{elementDescriptor:a.descriptors.checkoutFormElementsRoot,gap:4,sx:e=>({padding:e.space.$4}),children:[k.length>0&&e.totals.totalDueNow.amount>0&&(0,i.BX)(n.SegmentedControl.Root,{"aria-label":"Payment method source",value:x,onChange:e=>B(e),size:"lg",fullWidth:!0,children:[(0,i.tZ)(n.SegmentedControl.Button,{value:"existing",text:(0,a.localizationKeys)("commerce.paymentMethods")}),(0,i.tZ)(n.SegmentedControl.Button,{value:"new",text:(0,a.localizationKeys)("commerce.addPaymentMethod")})]}),"existing"===x&&(0,i.tZ)($,{checkout:e,paymentSources:k,totalDueNow:e.totals.totalDueNow,onPaymentSourceSubmit:Z,isSubmitting:d,submitError:p}),"new"===x&&(0,i.tZ)(S.M$,{checkout:e,onSuccess:v,onPayWithTestPaymentSourceSuccess:C,submitLabel:e.totals.totalDueNow.amount>0?(0,a.localizationKeys)("userProfile.billingPage.paymentSourcesSection.formButtonPrimary__pay",{amount:`${e.totals.totalDueNow.currencySymbol}${e.totals.totalDueNow.amountFormatted}`}):(0,a.localizationKeys)("commerce.subscribe"),submitError:p,setSubmitError:h,showPayWithTestCardSection:!0})]})},$=({checkout:e,totalDueNow:t,paymentSources:o,onPaymentSourceSubmit:r,isSubmitting:l,submitError:s})=>{let[c,d]=(0,g.useState)(e.paymentSource||o.find(e=>e.isDefault)),u=(0,g.useMemo)(()=>o.map(e=>{let t="card"!==e.paymentMethod?`${k(e.paymentMethod)}`:`${k(e.cardType)} ⋯ ${e.last4}`;return{value:e.id,label:t}}),[o]);return(0,i.BX)(a.Form,{onSubmit:r,sx:e=>({display:"flex",flexDirection:"column",rowGap:e.space.$4}),children:[e.totals.totalDueNow.amount>0?(0,i.BX)(n.Select,{elementId:"paymentSource",options:u,value:c?.id||null,onChange:e=>{d(o.find(t=>t.id===e.value))},portal:!0,children:[(0,i.tZ)("input",{name:"payment_source_id",type:"hidden",value:c?.id}),(0,i.tZ)(n.SelectButton,{icon:b.jC,sx:e=>({justifyContent:"space-between",backgroundColor:e.colors.$colorBackground}),children:c&&(0,i.tZ)(S.jr,{paymentSource:c})}),(0,i.tZ)(n.SelectOptionList,{sx:e=>({paddingBlock:e.space.$1,color:e.colors.$colorText})})]}):(0,i.tZ)("input",{name:"payment_source_id",type:"hidden",value:c?.id}),s&&(0,i.tZ)(n.Alert,{variant:"danger",sx:e=>({animation:`${m.animations.textInBig} ${e.transitionDuration.$slow}`}),children:"string"==typeof s?s:"longMessage"in s&&s.longMessage||s.message}),(0,i.tZ)(a.Button,{type:"submit",colorScheme:"primary",size:"sm",textVariant:"buttonLarge",sx:{width:"100%"},isLoading:l,children:(0,i.tZ)(a.Text,{localizationKey:t.amount>0?(0,a.localizationKeys)("commerce.pay",{amount:`${t.currencySymbol}${t.amountFormatted}`}):(0,a.localizationKeys)("commerce.subscribe")})})]})};var w=o(9626),Z=o(903);let v=e=>{let{planId:t,planPeriod:o,subscriberType:i="user"}=e,r=(0,f.cL)(),{organization:a}=(0,f.o8)(),{user:n}=(0,f.aF)(),l={key:"commerce-checkout",userId:n?.id,arguments:{..."org"===i?{orgId:a?.id}:{},planId:t,planPeriod:o}},{data:s,mutate:c}=(0,w.default)(l),{trigger:d,isMutating:m,error:u}=(0,Z.Z)(l,e=>r.billing?.startCheckout(e.arguments),{throwOnError:!1,onSuccess:e=>{c(e,!1)}});return(0,g.useEffect)(()=>(d(),()=>{c(void 0,!1)}),[]),{checkout:s,startCheckout:d,updateCheckout:e=>c(e,!1),isLoading:m,errors:u?.errors}},C=e=>{let{translateError:t}=(0,a.useLocalizations)(),{t:o}=(0,a.useLocalizations)(),{planId:c,planPeriod:d,subscriberType:m,onSubscriptionComplete:u}=e,{setIsOpen:p}=(0,n.useDrawerContext)(),y=(0,l.Tb)(),{animations:f}=(0,a.useAppearance)().parsedLayout,{data:g,isLoading:b}=(0,r.usePlans)(),{checkout:S,isLoading:k,updateCheckout:B,errors:$,startCheckout:w}=v({planId:c,planPeriod:d,subscriberType:m}),Z=!!$?.some(e=>"missing_payer_email"===e.code),C=g?.find(e=>e.id===c);if(k||b)return(0,i.tZ)(a.Spinner,{sx:{margin:"auto"}});if(S)return S?.status==="completed"?(0,i.tZ)(h,{checkout:S,isMotionSafe:!y&&!0===f}):(0,i.tZ)(x,{checkout:S,onCheckoutComplete:e=>{B(e),u?.()}});if(Z)return(0,i.tZ)(n.Drawer.Body,{children:(0,i.tZ)(a.Box,{sx:e=>({padding:e.space.$4}),children:(0,i.tZ)(s._,{title:(0,a.localizationKeys)("commerce.checkout.emailForm.title"),subtitle:(0,a.localizationKeys)("commerce.checkout.emailForm.subtitle"),onSuccess:w,onReset:()=>p(!1),disableAutoFocus:!0})})});let D=$?.[0];return D?.code==="invalid_plan_change"&&C?(0,i.tZ)(n.Drawer.Body,{children:(0,i.BX)(a.Flex,{gap:4,direction:"col",children:[(0,i.tZ)(a.Box,{elementDescriptor:a.descriptors.checkoutFormLineItemsRoot,sx:e=>({padding:e.space.$4,borderBottomWidth:e.borderWidths.$normal,borderBottomStyle:e.borderStyles.$solid,borderBottomColor:e.colors.$neutralAlpha100}),children:(0,i.tZ)(n.LineItems.Root,{children:(0,i.BX)(n.LineItems.Group,{children:[(0,i.tZ)(n.LineItems.Title,{title:C.name,description:"annual"===d?(0,a.localizationKeys)("commerce.billedAnnually"):void 0}),(0,i.tZ)(n.LineItems.Description,{prefix:"annual"===d?"x12":void 0,text:`${C.currencySymbol}${"month"===d?C.amountFormatted:C.annualMonthlyAmountFormatted}`,suffix:(0,a.localizationKeys)("commerce.checkout.perMonth")})]})})}),(0,i.tZ)(a.Box,{sx:e=>({padding:e.space.$4}),children:(0,i.tZ)(n.Alert,{variant:"info",colorScheme:"info",title:(0,a.localizationKeys)("commerce.cannotSubscribeMonthly")})})]})}):(0,i.tZ)(n.Drawer.Body,{children:(0,i.tZ)(a.Flex,{align:"center",justify:"center",sx:e=>({height:"100%",padding:e.space.$4,fontSize:e.fontSizes.$md}),children:(0,i.tZ)(n.Alert,{variant:"danger",colorScheme:"danger",children:$?t($[0]):o((0,a.localizationKeys)("unstable__errors.form_param_value_invalid"))})})})},D=e=>(0,i.tZ)(a.Flow.Root,{flow:"checkout",children:(0,i.tZ)(a.Flow.Part,{children:(0,i.tZ)(r.SubscriberTypeContext.Provider,{value:e.subscriberType||"user",children:(0,i.tZ)(r.CheckoutContext.Provider,{value:{componentName:"Checkout",...e},children:(0,i.BX)(n.Drawer.Content,{children:[(0,i.tZ)(n.Drawer.Header,{title:(0,a.localizationKeys)("commerce.checkout.title")}),(0,i.tZ)(C,{...e})]})})})})})},9140:function(e,t,o){o.d(t,{_:()=>b});var i=o(1925),r=o(3799),a=o(9144),n=o(8969),l=o(3812),s=o(7718),c=o(1085),d=o(43),m=o(207),u=o(4676),p=o(6917),h=o(3064),y=o(2464);let f=e=>{let{navigate:t}=(0,u.useRouter)(),{email:o,nextStep:r,onReset:n}=e,c=(0,s.useCardState)(),m=(0,l.useUserProfileContext)(),{startEnterpriseSSOLinkFlow:f}=(0,y.eq)(o);async function g(){await t(o.verification.externalVerificationRedirectURL?.href||"")}return a.useEffect(()=>{!function(){let{mode:e,componentName:t}=m;f({redirectUrl:"modal"===e?(0,p.bX)({url:window.location.href,componentName:t}):window.location.href}).then(()=>r()).catch(e=>(0,d.S3)(e,[],c.setError))}()},[]),(0,i.BX)(i.HY,{children:[(0,i.tZ)(h.Flex,{justify:"center",children:(0,i.tZ)(h.Button,{variant:"link",onClick:g,localizationKey:(0,h.localizationKeys)("userProfile.emailAddressPage.enterpriseSSOLink.formButton")})}),(0,i.tZ)(s.FormButtonContainer,{children:(0,i.tZ)(h.Button,{variant:"ghost",localizationKey:(0,h.localizationKeys)("userProfile.formButtonReset"),elementDescriptor:h.descriptors.formButtonReset,onClick:n})})]})};var g=o(2786);let b=(0,s.withCardStateProvider)(e=>{let{emailId:t,onSuccess:o,onReset:u,disableAutoFocus:p=!1}=e,h=(0,s.useCardState)(),{user:y}=(0,r.aF)(),b=(0,l.useEnvironment)(),x=(0,r.WZ)(e=>y?.createEmailAddress({email:e})),B=a.useRef(y?.emailAddresses.find(e=>e.id===t)),$=k(B.current,b),w=(0,n.a2)({defaultStep:+!!B.current,onNextStep:()=>h.setError(void 0)}),Z=(0,d.Yp)("emailAddress","",{type:"email",label:(0,c.u1)("formFieldLabel__emailAddress"),placeholder:(0,c.u1)("formFieldInputPlaceholder__emailAddress"),isRequired:!0}),v=Z.value.length>1&&y?.username!==Z.value,C=async e=>{if(e.preventDefault(),y)return x(Z.value).then(e=>{B.current=e,w.nextStep()}).catch(e=>(0,d.S3)(e,[Z],h.setError))},D=S($);return(0,i.BX)(n.en,{...w.props,children:[(0,i.tZ)(s.FormContainer,{headerTitle:e.title||(0,c.u1)("userProfile.emailAddressPage.title"),headerSubtitle:e.subtitle||(0,c.u1)("userProfile.emailAddressPage.formHint"),children:(0,i.BX)(s.Form.Root,{onSubmit:C,children:[(0,i.tZ)(s.Form.ControlRow,{elementId:Z.id,children:(0,i.tZ)(s.Form.PlainInput,{...Z.props,autoFocus:!p})}),(0,i.tZ)(s.FormButtons,{submitLabel:(0,c.u1)("userProfile.formButtonPrimary__add"),isDisabled:!v,onReset:u})]})}),(0,i.BX)(s.FormContainer,{headerTitle:(0,c.u1)("userProfile.emailAddressPage.verifyTitle"),headerSubtitle:(0,c.u1)(`${D}.formSubtitle`,{identifier:B.current?.emailAddress}),children:["email_link"===$&&(0,i.tZ)(g.K,{nextStep:o,email:B.current,onReset:u}),"email_code"===$&&(0,i.tZ)(m.H,{nextStep:o,identification:B.current,identifier:B.current?.emailAddress,prepareVerification:()=>B.current?.prepareVerification({strategy:"email_code"}),onReset:u}),"enterprise_sso"===$&&(0,i.tZ)(f,{nextStep:o,email:B.current,onReset:u})]})]})}),S=e=>{switch(e){case"email_code":return"userProfile.emailAddressPage.emailCode";case"enterprise_sso":return"userProfile.emailAddressPage.enterpriseSSOLink";case"email_link":return"userProfile.emailAddressPage.emailLink";default:throw Error(`Unsupported strategy for email verification: ${e}`)}},k=(e,t)=>e?.matchesSsoConnection?"enterprise_sso":!function(e){let{userSettings:t}=e,{email_address:o}=t.attributes;return!!(o?.enabled&&o?.verifications.includes("email_link"))}(t)?"email_code":"email_link"},207:function(e,t,o){o.d(t,{H:()=>s});var i=o(1925),r=o(9144),a=o(3064),n=o(7718),l=o(43);let s=e=>{let t=(0,n.useCardState)(),{nextStep:o,identification:s,identifier:c,onReset:d,prepareVerification:m}=e,u=()=>m?.()?.catch(e=>l.S3(e,[],t.setError)),p=(0,n.useFieldOTP)({onCodeEntryFinished:(e,t,o)=>{s?.attemptVerification({code:e}).then(()=>t()).catch(o)},onResendCodeClicked:u,onResolve:o});return r.useEffect(()=>{u()},[]),(0,i.BX)(i.HY,{children:[(0,i.tZ)(n.Form.OTPInput,{...p,label:(0,a.localizationKeys)("userProfile.emailAddressPage.emailCode.formTitle"),description:(0,a.localizationKeys)("userProfile.emailAddressPage.emailCode.formSubtitle",{identifier:c}),resendButton:(0,a.localizationKeys)("userProfile.emailAddressPage.emailCode.resendButton"),centerAlign:!1}),(0,i.BX)(n.FormButtonContainer,{children:[(0,i.tZ)(a.Button,{isLoading:p.isLoading,localizationKey:(0,a.localizationKeys)("formButtonPrimary__verify"),elementDescriptor:a.descriptors.formButtonPrimary,onClick:p.onFakeContinue}),(0,i.tZ)(a.Button,{variant:"ghost",isDisabled:p.isLoading,localizationKey:(0,a.localizationKeys)("userProfile.formButtonReset"),elementDescriptor:a.descriptors.formButtonReset,onClick:d})]})]})}},2786:function(e,t,o){o.d(t,{K:()=>u,M:()=>p});var i=o(1925),r=o(9144),a=o(8969),n=o(6749),l=o(3812),s=o(3064),c=o(7718),d=o(2464),m=o(43);let u=e=>{let{email:t,nextStep:o,onReset:a}=e,u=(0,c.useCardState)(),p=(0,l.useUserProfileContext)(),{startEmailLinkFlow:h}=(0,d.E2)(t),{displayConfig:y}=(0,l.useEnvironment)();function f(){let{routing:e}=p,t="virtual"===e?y.userProfileUrl:"";h({redirectUrl:(0,n.Uu)({ctx:p,baseUrl:t,intent:"profile"})}).then(()=>o()).catch(e=>(0,m.S3)(e,[],u.setError))}return r.useEffect(()=>{f()},[]),(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.VerificationLink,{resendButton:(0,s.localizationKeys)("userProfile.emailAddressPage.emailLink.resendButton"),onResendCodeClicked:f}),(0,i.tZ)(c.FormButtonContainer,{children:(0,i.tZ)(s.Button,{variant:"ghost",localizationKey:(0,s.localizationKeys)("userProfile.formButtonReset"),elementDescriptor:s.descriptors.formButtonReset,onClick:a})})]})},p=()=>(0,i.tZ)(a.Ej,{title:(0,s.localizationKeys)("signUp.emailLink.verifiedSwitchTab.title"),subtitle:(0,s.localizationKeys)("signUp.emailLink.verifiedSwitchTab.subtitle"),status:"verified"})}}]);