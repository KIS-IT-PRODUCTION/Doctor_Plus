"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["645"],{15515:function(e,t,r){r.d(t,{j:()=>g,f:()=>s});var o=r(79109);r(69144);var n=r(13638),i=r(50111),a=r(39541),l=r(24676),c=r(55913);let s=()=>{let{data:e,isLoading:t}=(0,i.useStatements)();return(0,o.tZ)(p,{page:1,onPageChange:e=>{},itemCount:(null==e?void 0:e.total_count)||0,pageCount:1,itemsPerPage:10,isLoading:t,emptyStateLocalizationKey:"No statements to display",headers:["Date","Amount"],rows:((null==e?void 0:e.data)||[]).map(e=>(0,o.tZ)(d,{statement:e},e.id))})},d=e=>{let{statement:t}=e,{timestamp:r,id:n,totals:{grandTotal:i}}=t,{navigate:s}=(0,l.useRouter)();return(0,o.BX)(u,{onClick:()=>{s("statement/".concat(n))},children:[(0,o.BX)(a.Td,{sx:{cursor:"pointer"},children:[(0,o.tZ)(a.Text,{variant:"subtitle",children:new Date(r).toLocaleString("en-US",{month:"long",year:"numeric"})}),(0,o.tZ)(a.Text,{colorScheme:"secondary",variant:"caption",truncate:!0,sx:e=>({marginTop:e.space.$0x5}),children:(0,c.L)(n)})]}),(0,o.tZ)(a.Td,{sx:{cursor:"pointer"},children:(0,o.BX)(a.Text,{colorScheme:"secondary",children:[i.currencySymbol,i.amountFormatted]})})]})},p=e=>{let{headers:t,page:r,onPageChange:i,rows:l,isLoading:c,itemCount:s,itemsPerPage:d,pageCount:p,emptyStateLocalizationKey:u}=e,h=s>0?Math.max(0,(r-1)*d)+1:0,S=Math.min(r*d,s);return(0,o.BX)(a.Col,{gap:4,sx:{width:"100%"},children:[(0,o.tZ)(a.Flex,{sx:e=>({overflowX:"auto",padding:e.space.$1}),children:(0,o.BX)(a.Table,{sx:{tableLayout:"fixed"},children:[(0,o.tZ)(a.Thead,{children:(0,o.tZ)(a.Tr,{children:t.map((e,t)=>(0,o.tZ)(a.Th,{elementDescriptor:a.descriptors.tableHead,localizationKey:e,sx:{width:0===t?"auto":"25%"}},t))})}),(0,o.tZ)(a.Tbody,{children:c?(0,o.tZ)(a.Tr,{children:(0,o.tZ)(a.Td,{colSpan:4,children:(0,o.tZ)(a.Spinner,{colorScheme:"primary",sx:{margin:"auto",display:"block"},elementDescriptor:a.descriptors.spinner})})}):l.length?l:(0,o.tZ)(m,{localizationKey:u},"empty")})]})}),p>1&&(0,o.tZ)(n.t,{count:p,page:r,onChange:i,siblingCount:1,rowInfo:{allRowsCount:s,startingRow:h,endingRow:S}})]})},m=e=>(0,o.tZ)(a.Tr,{children:(0,o.tZ)(a.Td,{colSpan:4,children:(0,o.tZ)(a.Text,{localizationKey:e.localizationKey,sx:{margin:"auto",display:"block",width:"fit-content"}})})}),u=e=>(0,o.tZ)(a.Tr,{...e,sx:e=>({":hover":{backgroundColor:e.colors.$neutralAlpha50}})});r(45261),r(70957),r(24551),r(22349),r(65223);var h=r(92654),S=r(86958),y=r(12464);function x(e){let{text:t,copyLabel:r="Copy"}=e,{onCopy:n,hasCopied:i}=(0,y.VP)(t);return(0,o.tZ)(a.Button,{elementDescriptor:a.descriptors.statementCopyButton,variant:"unstyled",onClick:n,sx:e=>({color:"inherit",width:e.sizes.$4,height:e.sizes.$4,padding:0,borderRadius:e.radii.$sm,"&:focus-visible":{outline:"2px solid",outlineColor:e.colors.$neutralAlpha200}}),focusRing:!1,"aria-label":i?"Copied":r,children:(0,o.tZ)(a.Icon,{size:"sm",icon:i?S.Jr:S.CK,"aria-hidden":!0})})}let b={Root:function(e){let{children:t}=e;return(0,o.tZ)(a.Box,{elementDescriptor:a.descriptors.statementRoot,as:"article",sx:e=>({borderWidth:e.borderWidths.$normal,borderStyle:e.borderStyles.$solid,borderColor:e.colors.$neutralAlpha100,borderRadius:e.radii.$lg,overflow:"clip"}),children:t})},Header:function(e){let{title:t,id:r,status:n}=e;return(0,o.BX)(a.Box,{elementDescriptor:a.descriptors.statementHeader,as:"header",sx:e=>({padding:e.space.$4,background:e.colors.$neutralAlpha25,display:"flex",justifyContent:"space-between",alignItems:"flex-start"}),children:[(0,o.BX)(a.Span,{elementDescriptor:a.descriptors.statementHeaderTitleContainer,children:[(0,o.tZ)(a.Heading,{elementDescriptor:a.descriptors.statementHeaderTitle,textVariant:"h2",localizationKey:t}),(0,o.BX)(a.Span,{sx:e=>({display:"flex",alignItems:"center",gap:e.space.$0x25,color:e.colors.$colorTextSecondary}),children:[(0,o.tZ)(x,{copyLabel:"Copy statement ID",text:r}),(0,o.tZ)(a.Text,{colorScheme:"secondary",variant:"subtitle",children:(0,c.L)(r)})]})]}),(0,o.tZ)(a.Badge,{elementDescriptor:a.descriptors.statementHeaderBadge,colorScheme:"open"===n?"secondary":"primary",sx:{textTransform:"capitalize"},children:n})]})},Body:function(e){let{children:t}=e;return(0,o.tZ)(a.Box,{elementDescriptor:a.descriptors.statementBody,children:t})},Section:function(e){let{children:t}=e;return(0,o.tZ)(a.Box,{elementDescriptor:a.descriptors.statementSection,as:"section",children:t})},SectionHeader:function(e){let{text:t}=e;return(0,o.tZ)(a.Box,{elementDescriptor:a.descriptors.statementSectionHeader,sx:e=>({paddingInline:e.space.$4,paddingBlock:e.space.$1,background:e.colors.$neutralAlpha50,borderBlockWidth:e.borderWidths.$normal,borderBlockStyle:e.borderStyles.$solid,borderBlockColor:e.colors.$neutralAlpha100}),children:(0,o.tZ)(a.Heading,{elementDescriptor:a.descriptors.statementSectionHeaderTitle,textVariant:"h3",as:"h2",localizationKey:t,sx:e=>({fontWeight:e.fontWeights.$medium})})})},SectionContent:function(e){let{children:t}=e;return(0,o.tZ)(a.Box,{elementDescriptor:a.descriptors.statementSectionContent,children:t})},SectionContentItem:function(e){let{children:t}=e;return(0,o.tZ)(a.Box,{elementDescriptor:a.descriptors.statementSectionContentItem,sx:e=>({paddingInline:e.space.$4,paddingBlock:e.space.$3,"&:not(:first-child)":{borderBlockStartWidth:e.borderWidths.$normal,borderBlockStartStyle:e.borderStyles.$solid,borderBlockStartColor:e.colors.$neutralAlpha100}}),children:t})},SectionContentDetailsHeader:function(e){let{title:t,description:r,secondaryTitle:n,secondaryDescription:i}=e;return(0,o.BX)(a.Box,{elementDescriptor:a.descriptors.statementSectionContentDetailsHeader,sx:e=>({marginBlockEnd:e.space.$2,display:"flex",justifyContent:"space-between"}),children:[(0,o.BX)(a.Box,{elementDescriptor:a.descriptors.statementSectionContentDetailsHeaderItem,children:[(0,o.BX)(a.Span,{sx:e=>({display:"flex",alignItems:"center",gap:e.space.$1}),children:[(0,o.tZ)(a.Icon,{elementDescriptor:a.descriptors.statementSectionContentDetailsHeaderItemIcon,icon:S.ou,colorScheme:"neutral"}),(0,o.tZ)(a.Heading,{elementDescriptor:a.descriptors.statementSectionContentDetailsHeaderTitle,as:"h3",textVariant:"h3",localizationKey:t})]}),(0,o.tZ)(a.Text,{variant:"caption",colorScheme:"secondary",elementDescriptor:a.descriptors.statementSectionContentDetailsHeaderDescription,localizationKey:r})]}),(0,o.BX)(a.Box,{elementDescriptor:a.descriptors.statementSectionContentDetailsHeaderItem,sx:{textAlign:"right"},children:[(0,o.tZ)(a.Text,{variant:"h3",elementDescriptor:a.descriptors.statementSectionContentDetailsHeaderSecondaryTitle,localizationKey:n}),(0,o.tZ)(a.Text,{variant:"caption",colorScheme:"secondary",elementDescriptor:a.descriptors.statementSectionContentDetailsHeaderSecondaryDescription,localizationKey:i})]})]})},SectionContentDetailsList:function(e){let{children:t}=e;return(0,o.tZ)(a.Box,{elementDescriptor:a.descriptors.statementSectionContentDetailsList,as:"ul",sx:e=>({margin:0,padding:0,borderWidth:e.borderWidths.$normal,borderStyle:e.borderStyles.$solid,borderColor:e.colors.$neutralAlpha100,borderRadius:e.radii.$md,overflow:"hidden"}),children:t})},SectionContentDetailsListItem:function(e){let{labelIcon:t,label:r,valueCopyable:n=!1,value:i,valueTruncated:l=!1}=e;return(0,o.BX)(a.Box,{elementDescriptor:a.descriptors.statementSectionContentDetailsListItem,as:"li",sx:e=>({margin:0,paddingInline:e.space.$2,paddingBlock:e.space.$1x5,display:"flex",justifyContent:"space-between",flexWrap:"wrap",columnGap:e.space.$2,rowGap:e.space.$0x5,"&:not(:first-child)":{borderBlockStartWidth:e.borderWidths.$normal,borderBlockStartStyle:e.borderStyles.$solid,borderBlockStartColor:e.colors.$neutralAlpha100}}),children:[(0,o.BX)(a.Span,{elementDescriptor:a.descriptors.statementSectionContentDetailsListItemLabelContainer,sx:e=>({display:"flex",alignItems:"center",gap:e.space.$1x5}),children:[t?(0,o.tZ)(a.Icon,{icon:t,colorScheme:"neutral"}):null,(0,o.tZ)(a.Text,{variant:"caption",colorScheme:"secondary",elementDescriptor:a.descriptors.statementSectionContentDetailsListItemLabel,localizationKey:r})]}),(0,o.tZ)(a.Span,{sx:e=>({display:"flex",alignItems:"center",gap:e.space.$0x25,color:e.colors.$colorTextSecondary}),children:"string"==typeof i?(0,o.BX)(o.HY,{children:[n?(0,o.tZ)(x,{copyLabel:"Copy statement ID",text:i}):null,(0,o.tZ)(a.Text,{colorScheme:"secondary",variant:"caption",elementDescriptor:a.descriptors.statementSectionContentDetailsListItemValue,children:l?(0,c.L)(i):i})]}):(0,o.tZ)(a.Text,{elementDescriptor:a.descriptors.statementSectionContentDetailsListItemValue,colorScheme:"secondary",variant:"caption",localizationKey:i})})]})},Footer:function(e){let{label:t,value:r}=e;return(0,o.BX)(a.Box,{elementDescriptor:a.descriptors.statementFooter,as:"footer",sx:e=>({paddingInline:e.space.$4,paddingBlock:e.space.$3,background:e.colors.$neutralAlpha25,borderBlockStartWidth:e.borderWidths.$normal,borderBlockStartStyle:e.borderStyles.$solid,borderBlockStartColor:e.colors.$neutralAlpha100,display:"flex",justifyContent:"space-between"}),children:[(0,o.tZ)(a.Text,{variant:"h3",localizationKey:t,elementDescriptor:a.descriptors.statementFooterLabel}),(0,o.BX)(a.Span,{elementDescriptor:a.descriptors.statementFooterValueContainer,sx:e=>({display:"flex",alignItems:"center",gap:e.space.$2x5}),children:[(0,o.tZ)(a.Text,{variant:"caption",colorScheme:"secondary",elementDescriptor:a.descriptors.statementFooterCurrency,children:"USD"}),(0,o.tZ)(a.Text,{variant:"h3",elementDescriptor:a.descriptors.statementFooterValue,children:r})]})]})}},g=()=>{let{params:e,navigate:t}=(0,l.useRouter)(),{isLoading:r}=(0,i.useStatements)(),{getStatementById:n}=(0,i.useStatementsContext)(),c=e.statementId?n(e.statementId):null;return r?(0,o.tZ)(a.Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,o.tZ)(a.Spinner,{colorScheme:"primary",sx:{margin:"auto",display:"block"},elementDescriptor:a.descriptors.spinner})}):c?(0,o.BX)(o.HY,{children:[(0,o.tZ)(h.h.Root,{sx:e=>({borderBlockEndWidth:e.borderWidths.$normal,borderBlockEndStyle:e.borderStyles.$solid,borderBlockEndColor:e.colors.$neutralAlpha100,marginBlockEnd:e.space.$4,paddingBlockEnd:e.space.$4}),children:(0,o.tZ)(h.h.BackLink,{onClick:()=>void t("../../",{searchParams:new URLSearchParams("tab=statements")}),children:(0,o.tZ)(h.h.Title,{localizationKey:"Statements",textVariant:"h2"})})}),(0,o.BX)(b.Root,{children:[(0,o.tZ)(b.Header,{title:new Date(c.timestamp).toLocaleString("en-US",{month:"long",year:"numeric"}),id:c.id,status:c.status}),(0,o.tZ)(b.Body,{children:c.groups.map(e=>(0,o.BX)(b.Section,{children:[(0,o.tZ)(b.SectionHeader,{text:new Date(e.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric"})}),(0,o.tZ)(b.SectionContent,{children:e.items.map(e=>{var t,r;return(0,o.BX)(b.SectionContentItem,{children:[(0,o.tZ)(b.SectionContentDetailsHeader,{title:e.subscription.plan.name,description:"".concat(null===(t=e.subscription.amount)||void 0===t?void 0:t.currencySymbol).concat(null===(r=e.subscription.amount)||void 0===r?void 0:r.amountFormatted," / ").concat("month"===e.subscription.planPeriod?"month":"year"),secondaryTitle:"".concat(e.amount.currencySymbol).concat(e.amount.amountFormatted),secondaryDescription:""}),(0,o.BX)(b.SectionContentDetailsList,{children:[(0,o.tZ)(b.SectionContentDetailsListItem,{label:"recurring"===e.chargeType?"Paid for ".concat(e.subscription.plan.name," ").concat(e.subscription.planPeriod," plan"):"Subscribed and paid for ".concat(e.subscription.plan.name," ").concat(e.subscription.planPeriod," plan"),labelIcon:"recurring"===e.chargeType?S.uR:S.v3,value:e.id,valueTruncated:!0,valueCopyable:!0}),e.subscription.credit&&e.subscription.credit.amount.amount>0?(0,o.tZ)(b.SectionContentDetailsListItem,{label:"Prorated credit for partial usage of previous subscription ",value:"(".concat(e.subscription.credit.amount.currencySymbol).concat(e.subscription.credit.amount.amountFormatted,")")}):null]})]},e.id)})})]},e.timestamp))}),(0,o.tZ)(b.Footer,{label:"Total paid",value:"".concat(c.totals.grandTotal.currencySymbol).concat(c.totals.grandTotal.amountFormatted)})]})]}):(0,o.tZ)(a.Text,{children:"Statement not found"})}}}]);